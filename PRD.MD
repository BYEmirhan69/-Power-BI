Harika bir proje vizyonu Emirhan AÅŸaÄŸÄ±da, iÅŸ zekasÄ± platformunuz iÃ§in detaylÄ± bir prd.md (Product Requirements Document) taslaÄŸÄ± hazÄ±rladÄ±m. Her adÄ±mÄ±n baÅŸÄ±na [ ] iÅŸareti ekledim ve senin Ã¶ngÃ¶rmediÄŸin ama sistemin sÃ¼rdÃ¼rÃ¼lebilirliÄŸi, Ã¶lÃ§eklenebilirliÄŸi ve kullanÄ±cÄ± deneyimi aÃ§Ä±sÄ±ndan kritik olabilecek bazÄ± Ã¶zellikleri de ekledim.

---

## ğŸ“„ prd.md â€” Ä°ÅŸ ZekasÄ± Platformu

### ğŸ¯ Proje AmacÄ±
[x] FirmalarÄ±n kendi veri kaynaklarÄ±nÄ± kullanarak zaman serisi, tÃ¼ketici davranÄ±ÅŸlarÄ± ve teknoloji kullanÄ±mÄ± gibi verileri gÃ¶rselleÅŸtirebilecekleri, modÃ¼ler ve Ã¶lÃ§eklenebilir bir iÅŸ zekasÄ± platformu geliÅŸtirmek.

---

### ğŸ§± Temel BileÅŸenler

#### [x] VeritabanÄ±
- Supabase (PostgreSQL tabanlÄ±)
- Otomatik veri senkronizasyonu ve veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼ kontrolleri
- [x] UUID tabanlÄ± veri kimliklendirme
- [x] Zaman damgasÄ± ile veri versiyonlama

#### [x] Web ArayÃ¼zÃ¼
- React tabanlÄ± SPA (Single Page Application) - Next.js 16 kullanÄ±lÄ±yor
- [x] Dinamik grafik bileÅŸenleri (Chart.js, Recharts veya ECharts entegrasyonu) - Recharts entegre edildi
- [x] Sayfa bazlÄ± modÃ¼ler yapÄ± (Dashboard, Veri AktarÄ±mÄ±, Grafikler, Ayarlar)
- [x] KullanÄ±cÄ± dostu UI/UX (renk kodlama, filtreleme, kolon seÃ§imi)
- [x] Tema desteÄŸi (light/dark mode) - next-themes ile uygulandÄ±

#### [x] Veri Toplama KatmanÄ±
- API entegrasyonu (REST/GraphQL) - HttpClient servisi oluÅŸturuldu
- Web scraping (Puppeteer, Cheerio, Selenium opsiyonlarÄ±) - ScrapingService oluÅŸturuldu
- CSV/Excel dosyasÄ± yÃ¼kleme - FileParserService oluÅŸturuldu
- [x] Otomatik veri doÄŸrulama ve temizleme pipeline'Ä± - ValidationPipeline oluÅŸturuldu
- [x] Veri tÃ¼rÃ¼ne gÃ¶re otomatik sÄ±nÄ±flandÄ±rma (zaman serisi, davranÄ±ÅŸsal, teknolojik) - ClassificationResult tipi tanÄ±mlandÄ±

---

### ğŸ§© KullanÄ±cÄ± Rolleri ve Yetkilendirme

#### [x] Firma Yetkilisi
- Veri yÃ¼kleme, grafik oluÅŸturma, rapor alma

#### [x] Sistem YÃ¶neticisi
- KullanÄ±cÄ± yÃ¶netimi, veri akÄ±ÅŸÄ± kontrolÃ¼, log takibi

#### [x] GeliÅŸtirici
- API eriÅŸimi, Ã¶zel entegrasyonlar

#### [x] Yetkilendirme Ã–zellikleri
- JWT tabanlÄ± oturum yÃ¶netimi - Supabase Auth kullanÄ±lÄ±yor
- [x] Rol bazlÄ± eriÅŸim kontrolÃ¼ (RBAC) - UserRole tipi (admin, user, developer) tanÄ±mlandÄ±
- [ ] Ä°ki faktÃ¶rlÃ¼ kimlik doÄŸrulama (opsiyonel)

---

### ğŸ“Š Grafik ve GÃ¶rselleÅŸtirme ModÃ¼lÃ¼

#### [x] Grafik TÃ¼rleri
- Zaman serisi Ã§izgi grafikleri - DynamicLineChart
- Pasta, Ã§ubuk, alan grafikleri - DynamicPieChart, DynamicBarChart, DynamicAreaChart
- [x] Korelasyon ve regresyon analizleri iÃ§in scatter plot - DynamicScatterChart
- [x] Heatmap ve radar grafikleri (ileri seviye kullanÄ±cÄ±lar iÃ§in) - DynamicHeatmapChart, DynamicRadarChart

#### [x] Ã–zelleÅŸtirme
- Renk paleti seÃ§imi - DEFAULT_COLORS tanÄ±mlandÄ±
- Filtreleme (tarih, kategori, metrik)
- [x] Dinamik kolon seÃ§imi
- [x] Grafik paylaÅŸÄ±mÄ± ve embed kodu Ã¼retimi - ChartEmbedGenerator bileÅŸeni oluÅŸturuldu

---

### ğŸ”„ Veri AktarÄ±mÄ± ve GÃ¼ncelleme

#### [x] Dosya YÃ¼kleme
- CSV, XLSX destekli - FileParserService'de uygulandÄ±
- [x] SÃ¼rÃ¼kle-bÄ±rak arayÃ¼zÃ¼ - FileDropzone bileÅŸeni (react-dropzone)
- [x] Otomatik veri eÅŸleme (kolon isimlerine gÃ¶re) - ColumnMapping ve ColumnInfo tipleri

#### [x] API ile AktarÄ±m
- Token bazlÄ± eriÅŸim - AuthConfig tipleri (bearer, api_key, basic, oauth2)
- [x] Veri push/pull mantÄ±ÄŸÄ± - HttpClient.fetchPaginated metodu
- [x] GÃ¼nlÃ¼k/haftalÄ±k otomatik veri Ã§ekme scheduler'Ä± - ScheduleConfig tipi tanÄ±mlandÄ±

#### [x] Web Scraping
- [x] Kaynak bazlÄ± scraping ÅŸablonlarÄ± - ScrapingService.createTemplate metodu
- [x] CAPTCHA ve anti-bot Ã¶nlemleri iÃ§in fallback stratejisi - Puppeteer desteÄŸi

---

### ğŸ“ Loglama ve Ä°zlenebilirlik

#### [x] Sistem LoglarÄ±
- Veri aktarÄ±m geÃ§miÅŸi - activity_logs tablosu
- Grafik oluÅŸturma ve paylaÅŸÄ±m geÃ§miÅŸi
- [x] Hata loglarÄ± ve uyarÄ± sistemi

#### [x] KullanÄ±cÄ± LoglarÄ±
- Oturum aÃ§ma/kapatma - AuthProvider ile izleniyor
- Veri yÃ¼kleme ve silme iÅŸlemleri - activity_logs tablosu

---

### ğŸ“ˆ Performans ve Ã–lÃ§eklenebilirlik

#### [x] Veri Boyutu YÃ¶netimi
- BÃ¼yÃ¼k veri setleri iÃ§in sayfalama ve lazy loading - fetchPaginated metodu
- [ ] Arka planda veri iÅŸleme (worker queue)

#### [ ] Cache ve Optimize
- [ ] Grafik Ã¶nbellekleme
- [ ] SÄ±k kullanÄ±lan veri sorgularÄ± iÃ§in cache layer

---

### ğŸ›¡ GÃ¼venlik ve Yedekleme

#### [x] GÃ¼venlik
- HTTPS zorunluluÄŸu - Next.js middleware
- [ ] Rate limiting ve IP bazlÄ± eriÅŸim kontrolÃ¼
- [x] SQL injection ve XSS koruma katmanlarÄ± - Supabase RLS + Zod validation

#### [ ] Yedekleme
- GÃ¼nlÃ¼k Supabase snapshot'larÄ±
- [ ] Manuel yedek alma opsiyonu

---

### ğŸ“¬ Bildirim ve Raporlama

#### [x] Bildirimler
- Veri aktarÄ±mÄ± baÅŸarÄ±lÄ±/baÅŸarÄ±sÄ±z bildirimleri - notifications tablosu + sonner toast
- [ ] Grafik paylaÅŸÄ±mÄ± sonrasÄ± e-posta bildirimi

#### [x] Raporlama
- PDF/Excel formatÄ±nda dÄ±ÅŸa aktarÄ±m - reports tablosu (format: pdf, excel, csv)
- [ ] Zaman bazlÄ± veri analiz raporlarÄ±

---

### ğŸ§  AI Destekli Ã–zellikler (Opsiyonel GeniÅŸleme)

#### [ ] Otomatik grafik Ã¶nerileri (veri tÃ¼rÃ¼ne gÃ¶re)
#### [ ] Anomali tespiti ve uyarÄ± sistemi
#### [ ] DoÄŸal dil ile grafik oluÅŸturma ("Son 6 ay satÄ±ÅŸ trendini gÃ¶ster")

---

ğŸ“Œ Ek BileÅŸenler ve Sonradan Eklenen Gereksinimler
ğŸ”¶ 1. Ä°kinci VeritabanÄ±: MongoDB Atlas Entegrasyonu

Bu projede hocanÄ±n gereksinimi doÄŸrultusunda iliÅŸkisel Supabase veritabanÄ±na ek olarak NoSQL tabanlÄ± MongoDB Atlas entegre edilmiÅŸtir.

KullanÄ±m AmacÄ±

Scraping sonrasÄ± elde edilen ham JSON verilerinin saklanmasÄ±

CSV/XLSX ile yÃ¼klenen dosyalarÄ±n iÅŸlenmemiÅŸ halinin depolanmasÄ±

Veri iÅŸleme pipelineâ€™Ä±nda oluÅŸan hata ve uyarÄ± loglarÄ±nÄ±n saklanmasÄ±

BÃ¼yÃ¼k hacimli, ÅŸema gerektirmeyen dokÃ¼man tabanlÄ± verilerin tutulmasÄ±

Veri gÃ¶lÃ¼ (data lake) yapÄ±sÄ± ile normalize edilmemiÅŸ verinin saklanmasÄ±

Mimari RolÃ¼

MongoDB â†’ Raw Data Layer (ham veri, loglar, event stream)

Supabase â†’ Processed Data Layer (analiz verisi, kullanÄ±cÄ± verisi, grafik metrikleri, rapor kayÄ±tlarÄ±)

Bu yapÄ±, projeye hibrit veritabanÄ± mimarisi kazandÄ±rarak hem esneklik hem de performans saÄŸlar.

ğŸ”¶ 2. Veri Pipeline GÃ¼ncellemesi (Raw â†’ Processed)

Platformun veri akÄ±ÅŸÄ± ikinci veritabanÄ± eklentisiyle birlikte aÅŸaÄŸÄ±daki yeniden tanÄ±mlanmÄ±ÅŸ sÃ¼reÃ§ten oluÅŸur:

Kaynaklar:

Web scraping

REST API entegrasyonlarÄ±

CSV/XLSX dosya yÃ¼klemeleri

Ham Veri Depolama:

Elde edilen tÃ¼m ham sonuÃ§lar MongoDB Atlas Ã¼zerinde raw_scraping_results koleksiyonunda saklanÄ±r.

Hata, uyarÄ±, request/response gibi event tabanlÄ± loglar yine MongoDB'de kayÄ±t altÄ±na alÄ±nÄ±r.

Pipeline Ä°ÅŸleme:

ValidationPipeline ham veriyi doÄŸrular, temizler ve sÄ±nÄ±flandÄ±rÄ±r.

Normalize EdilmiÅŸ Ã‡Ä±ktÄ±:

TemizlenmiÅŸ veri Supabase Ã¼zerinde analitik tablolara yazÄ±lÄ±r.

GÃ¶rselleÅŸtirme:

Dashboard, grafikler ve raporlama iÅŸlemleri Supabaseâ€™teki iÅŸlenmiÅŸ veri Ã¼zerinden Ã§alÄ±ÅŸÄ±r.

ğŸ”¶ 3. Loglama Mimarisi GeniÅŸletmesi

Yeni log yapÄ±sÄ±:

Log Tipi	SaklandÄ±ÄŸÄ± Yer	AÃ§Ä±klama
Scraping loglarÄ±	MongoDB Atlas	Ham event, hata detayÄ±, aÃ§Ä±klama, request/response
Cron/Scheduler loglarÄ±	MongoDB Atlas	ZamanlanmÄ±ÅŸ gÃ¶revlerin geÃ§miÅŸi
KullanÄ±cÄ± aktiviteleri	Supabase	activity_logs tablosu
Raporlama loglarÄ±	Supabase	PDF/Excel Ã§Ä±ktÄ±larÄ±nÄ±n geÃ§miÅŸi

Bu Ã§ift katmanlÄ± loglama altyapÄ±sÄ± hem detaylÄ± analiz hem de performans odaklÄ± Ã¶zet raporlama imkÃ¢nÄ± saÄŸlar.

ğŸ”¶ 4. Performans ve Ã–lÃ§eklenebilirlik Ä°yileÅŸtirmeleri

Ham veri Supabase yerine MongoDBâ€™de tutulduÄŸu iÃ§in iliÅŸkisel veritabanÄ± sorgularÄ± daha hÄ±zlÄ± ve stabil Ã§alÄ±ÅŸÄ±r.

MongoDBâ€™nin dokÃ¼man tabanlÄ± yapÄ±sÄ± sayesinde bÃ¼yÃ¼k JSON verileri iÃ§in yatay Ã¶lÃ§eklenebilirlik elde edilir.

Pipeline iki katmanda Ã§alÄ±ÅŸtÄ±ÄŸÄ± iÃ§in veri iÅŸleme sÃ¼reÃ§leri ayrÄ±ÅŸÄ±r ve daha yÃ¶netilebilir hale gelir.

ğŸ”¶ 5. GÃ¼venlik KatmanÄ± GÃ¼ncellemeleri

MongoDB Atlas baÄŸlantÄ±larÄ± TLS ÅŸifreleme ve IP allowlist ile korunur.

Supabase tarafÄ±nda RLS (Row Level Security) + JWT tabanlÄ± kullanÄ±cÄ± doÄŸrulama sÃ¼rdÃ¼rÃ¼lÃ¼r.

Her iki veritabanÄ± iÃ§in eriÅŸim kimlikleri birbirinden tamamen izole edilmiÅŸtir, bÃ¶ylece yetki ihlalleri minimize edilir.

ğŸ”¶ 6. GeniÅŸletilmiÅŸ Sistem Mimarisi DiyagramÄ±
       [Scraping / API EntegrasyonlarÄ± / Dosya YÃ¼kleme]
                             â”‚
                             â–¼
           [MongoDB Atlas â€” Raw Data & Logs Layer]
                             â”‚
                     Validation Pipeline
                             â”‚
                             â–¼
            [Supabase â€” Processed/Analytics Data Layer]
                             â”‚
                             â–¼
                [Dashboard Â· Grafikler Â· Raporlama]

ğŸ”¶ 7. Bu Ek BileÅŸenin PRDâ€™ye KatkÄ±sÄ±

Projenin â€œiki veritabanÄ± kullanmaâ€ gereksinimini karÅŸÄ±lar.

GerÃ§ek bir BI platformuna uygun data lake + data warehouse mimarisi saÄŸlar.

BÃ¼yÃ¼k veri, loglama ve esneklik konularÄ±nda uzun vadeli Ã¶lÃ§eklenebilirlik sunar.
